<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EdQuiz - Interactive Learning Platform</title>
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script src="https://unpkg.com/qrcode-generator"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #8bcaea 0%, #8fc983 100%);
            min-height: 100vh;
        }
        .neubrutalism {
            border: 3px solid #000;
            box-shadow: 5px 5px 0px #000;
        }
        .neubrutalism-btn {
            border: 2px solid #000;
            box-shadow: 3px 3px 0px #000;
            transition: all 0.2s ease;
        }
        .neubrutalism-btn:hover {
            transform: translate(-2px, -2px);
            box-shadow: 5px 5px 0px #000;
        }
        .neubrutalism-btn:active {
            transform: translate(1px, 1px);
            box-shadow: 2px 2px 0px #000;
        }
        [x-cloak] { display: none !important; }
    </style>
</head>
<body x-data="quizApp">
    <!-- Landing Page -->
    <div x-show="currentScreen === 'landing'" class="min-h-screen flex flex-col items-center justify-center p-4">
        <img :src="logo" alt="EdQuiz Logo" class="w-48 h-48 mb-8 neubrutalism bg-white p-4">
        <h1 class="text-4xl font-bold mb-4 text-center">Welcome to EdQuiz!</h1>
        <p class="text-xl mb-8 text-center">Challenge your brain, anytime, anywhere</p>
        <button @click="currentScreen = 'login'" class="neubrutalism-btn bg-white px-8 py-4 text-lg font-semibold">
            Get Started
        </button>
    </div>

    <!-- Login Screen -->
    <div x-show="currentScreen === 'login'" x-cloak class="min-h-screen flex flex-col items-center justify-center p-4">
        <button @click="currentScreen = 'landing'" class="absolute top-4 left-4 neubrutalism-btn bg-white p-2">
            <i class="bi bi-arrow-left text-xl"></i>
        </button>
        
        <div class="neubrutalism bg-white p-8 w-full max-w-md">
            <h2 class="text-2xl font-bold mb-6">Login</h2>
            <form @submit.prevent="handleLogin">
                <div class="mb-4">
                    <label class="block mb-2">Mobile Number</label>
                    <input type="tel" x-model="phone" required pattern="[0-9]{10}" 
                           class="w-full p-3 neubrutalism">
                </div>
                <template x-if="!otpSent">
                    <button type="button" @click="sendOTP" 
                            class="w-full neubrutalism-btn bg-[#8bcaea] py-3 font-semibold">
                        Send OTP
                    </button>
                </template>
                <template x-if="otpSent">
                    <div>
                        <div class="mb-4">
                            <label class="block mb-2">Enter OTP</label>
                            <input type="text" x-model="otp" required 
                                   class="w-full p-3 neubrutalism" maxlength="6">
                        </div>
                        <button type="submit" 
                                class="w-full neubrutalism-btn bg-[#8fc983] py-3 font-semibold">
                            Verify OTP
                        </button>
                    </div>
                </template>
            </form>
        </div>
    </div>

    <!-- Home Screen -->
    <div x-show="currentScreen === 'home'" x-cloak class="min-h-screen p-4">
        <div class="max-w-md mx-auto">
            <div class="grid grid-cols-1 gap-4 mb-16">
                <button @click="currentScreen = 'startQuiz'" 
                        class="neubrutalism-btn bg-white p-6 text-xl font-semibold">
                    Start Quiz
                </button>
                <button @click="currentScreen = 'hostQuiz'" 
                        class="neubrutalism-btn bg-white p-6 text-xl font-semibold">
                    Host Quiz
                </button>
                <button @click="showJoinQuizModal = true" 
                        class="neubrutalism-btn bg-white p-6 text-xl font-semibold">
                    Join Quiz
                </button>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <div class="fixed bottom-0 left-0 right-0 bg-white border-t-2 border-black">
            <div class="flex justify-around p-4">
                <button @click="currentScreen = 'leaderboard'" class="text-2xl"><i class="bi bi-trophy"></i></button>
                <button @click="currentScreen = 'home'" class="text-2xl"><i class="bi bi-house"></i></button>
                <button @click="currentScreen = 'profile'" class="text-2xl"><i class="bi bi-person"></i></button>
            </div>
        </div>
    </div>

    <!-- Start Quiz Screen -->
    <div x-show="currentScreen === 'startQuiz'" x-cloak class="min-h-screen p-4">
        <button @click="currentScreen = 'home'" class="neubrutalism-btn bg-white p-2 mb-4">
            <i class="bi bi-arrow-left text-xl"></i>
        </button>
        
        <div class="neubrutalism bg-white p-6 max-w-md mx-auto">
            <h2 class="text-2xl font-bold mb-6">Start Quiz</h2>
            <form @submit.prevent="startQuiz">
                <div class="mb-4">
                    <label class="block mb-2">Select Topic</label>
                    <select x-model="quizTopic" required class="w-full p-3 neubrutalism">
                        <option value="">Select a topic</option>
                        <option value="science">Science</option>
                        <option value="history">History</option>
                        <option value="technology">Technology</option>
                    </select>
                </div>
                
                <div class="mb-4">
                    <label class="block mb-2">Custom Topic</label>
                    <input type="text" x-model="customTopic" class="w-full p-3 neubrutalism">
                </div>
                
                <div class="mb-4">
                    <label class="block mb-2">Difficulty</label>
                    <select x-model="difficulty" required class="w-full p-3 neubrutalism">
                        <option value="easy">Easy</option>
                        <option value="medium">Medium</option>
                        <option value="hard">Hard</option>
                    </select>
                </div>
                
                <div class="mb-6">
                    <label class="block mb-2">Number of Questions</label>
                    <input type="number" x-model="questionCount" min="1" max="10" required 
                           class="w-full p-3 neubrutalism">
                </div>
                
                <button type="submit" class="w-full neubrutalism-btn bg-[#8bcaea] py-3 font-semibold">
                    Generate Quiz
                </button>
            </form>
        </div>
    </div>

    <!-- Quiz Question Screen -->
    <div x-show="currentScreen === 'question'" x-cloak class="min-h-screen p-4">
        <div class="max-w-md mx-auto">
            <div class="mb-4 flex justify-between items-center">
                <button @click="exitQuiz" class="neubrutalism-btn bg-white p-2">
                    <i class="bi bi-x-lg"></i>
                </button>
                <div class="text-xl font-bold">Question <span x-text="currentQuestionIndex + 1"></span>/<span x-text="questions.length"></span></div>
                <div class="text-xl font-bold" x-text="timer + 's'"></div>
            </div>
            
            <div class="neubrutalism bg-white p-6 mb-4">
                <p class="text-xl mb-6" x-text="currentQuestion.question"></p>
                <div class="grid grid-cols-1 gap-4">
                    <template x-for="(option, index) in currentQuestion.options" :key="index">
                        <button @click="selectAnswer(index)" 
                                :class="{'bg-green-200': showAnswer && index === currentQuestion.correctIndex,
                                        'bg-red-200': showAnswer && selectedAnswer === index && index !== currentQuestion.correctIndex}"
                                class="neubrutalism-btn bg-white p-4 text-left" 
                                :disabled="showAnswer"
                                x-text="option">
                        </button>
                    </template>
                </div>
            </div>
            
            <button x-show="showAnswer" @click="nextQuestion" 
                    class="w-full neubrutalism-btn bg-[#8fc983] py-3 font-semibold">
                Next Question
            </button>
        </div>
    </div>

    <!-- Results Screen -->
    <div x-show="currentScreen === 'results'" x-cloak class="min-h-screen p-4">
        <div class="max-w-md mx-auto">
            <div class="neubrutalism bg-white p-6">
                <h2 class="text-2xl font-bold mb-6">Quiz Results</h2>
                <p class="text-xl mb-4">Score: <span x-text="score"></span>/<span x-text="questions.length"></span></p>
                <p class="text-xl mb-6">Time Taken: <span x-text="totalTime"></span>s</p>
                <button @click="currentScreen = 'leaderboard'" 
                        class="w-full neubrutalism-btn bg-[#8bcaea] py-3 font-semibold mb-4">
                    View Leaderboard
                </button>
                <button @click="currentScreen = 'home'" 
                        class="w-full neubrutalism-btn bg-white py-3 font-semibold">
                    Back to Home
                </button>
            </div>
        </div>
    </div>

    <!-- Host Quiz Screen -->
    <div x-show="currentScreen === 'hostQuiz'" x-cloak class="min-h-screen p-4">
        <button @click="currentScreen = 'home'" class="neubrutalism-btn bg-white p-2 mb-4">
            <i class="bi bi-arrow-left text-xl"></i>
        </button>
        
        <div class="neubrutalism bg-white p-6 max-w-md mx-auto">
            <h2 class="text-2xl font-bold mb-6">Host Quiz</h2>
            <form @submit.prevent="hostQuiz">
                <!-- Same form as Start Quiz -->
                <div class="mb-4">
                    <label class="block mb-2">Select Topic</label>
                    <select x-model="quizTopic" required class="w-full p-3 neubrutalism">
                        <option value="">Select a topic</option>
                        <option value="science">Science</option>
                        <option value="history">History</option>
                        <option value="technology">Technology</option>
                    </select>
                </div>
                
                <div class="mb-4">
                    <label class="block mb-2">Custom Topic</label>
                    <input type="text" x-model="customTopic" class="w-full p-3 neubrutalism">
                </div>
                
                <div class="mb-4">
                    <label class="block mb-2">Difficulty</label>
                    <select x-model="difficulty" required class="w-full p-3 neubrutalism">
                        <option value="easy">Easy</option>
                        <option value="medium">Medium</option>
                        <option value="hard">Hard</option>
                    </select>
                </div>
                
                <div class="mb-6">
                    <label class="block mb-2">Number of Questions</label>
                    <input type="number" x-model="questionCount" min="1" max="10" required 
                           class="w-full p-3 neubrutalism">
                </div>
                
                <button type="submit" class="w-full neubrutalism-btn bg-[#8bcaea] py-3 font-semibold">
                    Generate Quiz
                </button>
            </form>
        </div>
    </div>

    <!-- Join Quiz Modal -->
    <div x-show="showJoinQuizModal" x-cloak
         class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4">
        <div class="neubrutalism bg-white p-6 max-w-md w-full">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">Join Quiz</h2>
                <button @click="showJoinQuizModal = false" class="text-2xl">&times;</button>
            </div>
            <form @submit.prevent="joinQuiz">
                <div class="mb-6">
                    <label class="block mb-2">Enter Quiz Code</label>
                    <input type="text" x-model="quizCode" required class="w-full p-3 neubrutalism">
                </div>
                <button type="submit" class="w-full neubrutalism-btn bg-[#8bcaea] py-3 font-semibold">
                    Join
                </button>
            </form>
        </div>
    </div>

    <!-- Leaderboard Screen -->
    <div x-show="currentScreen === 'leaderboard'" x-cloak class="min-h-screen p-4">
        <button @click="currentScreen = 'home'" class="neubrutalism-btn bg-white p-2 mb-4">
            <i class="bi bi-arrow-left text-xl"></i>
        </button>
        
        <div class="neubrutalism bg-white p-6 max-w-md mx-auto">
            <h2 class="text-2xl font-bold mb-6">Leaderboard</h2>
            <div class="space-y-4">
                <template x-for="(user, index) in leaderboard" :key="index">
                    <div class="flex items-center justify-between p-4 neubrutalism">
                        <div class="flex items-center">
                            <span x-text="index + 1" class="mr-4 font-bold"></span>
                            <span x-text="user.name"></span>
                        </div>
                        <div>
                            <span x-text="user.score"></span> points
                        </div>
                    </div>
                </template>
            </div>
        </div>
    </div>

    <!-- Profile Screen -->
    <div x-show="currentScreen === 'profile'" x-cloak class="min-h-screen p-4">
        <button @click="currentScreen = 'home'" class="neubrutalism-btn bg-white p-2 mb-4">
            <i class="bi bi-arrow-left text-xl"></i>
        </button>
        
        <div class="neubrutalism bg-white p-6 max-w-md mx-auto">
            <h2 class="text-2xl font-bold mb-6">Profile</h2>
            <div class="space-y-4 mb-6">
                <div>
                    <label class="block mb-2">Name</label>
                    <input type="text" x-model="user.name" class="w-full p-3 neubrutalism">
                </div>
                <div>
                    <label class="block mb-2">Phone</label>
                    <input type="tel" x-model="user.phone" disabled class="w-full p-3 neubrutalism bg-gray-100">
                </div>
            </div>
            
            <h3 class="text-xl font-bold mb-4">Past Quizzes</h3>
            <div class="space-y-4 mb-6">
                <template x-for="(quiz, index) in user.pastQuizzes" :key="index">
                    <div class="p-4 neubrutalism">
                        <div class="flex justify-between mb-2">
                            <span x-text="quiz.topic"></span>
                            <span x-text="quiz.score + '/' + quiz.total"></span>
                        </div>
                        <div class="text-sm text-gray-600" x-text="quiz.date"></div>
                    </div>
                </template>
            </div>
            
            <button @click="logout" class="w-full neubrutalism-btn bg-red-500 text-white py-3 font-semibold">
                Logout
            </button>
        </div>
    </div>

    <script>
        document.addEventListener('alpine:init', () => {
            Alpine.data('quizApp', () => ({
                logo: 'https://firebasestorage.googleapis.com/v0/b/widecanvas-d0dd4.appspot.com/o/logos%2FEdQuiz.png?alt=media&token=92fda5e7-a86a-421c-a941-7a177aeb4728',
                currentScreen: 'landing',
                phone: '',
                otp: '',
                otpSent: false,
                quizTopic: '',
                customTopic: '',
                difficulty: 'easy',
                questionCount: 5,
                questions: [],
                currentQuestionIndex: 0,
                score: 0,
                timer: 30,
                totalTime: 0,
                timerInterval: null,
                selectedAnswer: null,
                showAnswer: false,
                showJoinQuizModal: false,
                quizCode: '',
                user: {
                    name: 'John Doe',
                    phone: '',
                    pastQuizzes: [
                        { topic: 'Science', score: 8, total: 10, date: '2023-10-15' },
                        { topic: 'History', score: 7, total: 10, date: '2023-10-14' }
                    ]
                },
                leaderboard: [
                    { name: 'John Doe', score: 95 },
                    { name: 'Jane Smith', score: 88 },
                    { name: 'Bob Johnson', score: 82 }
                ],

                sendOTP() {
                    if(this.phone.length === 10) {
                        this.otpSent = true;
                    }
                },

                handleLogin() {
                    if(this.otp.length === 6) {
                        this.user.phone = this.phone;
                        this.currentScreen = 'home';
                    }
                },

                async startQuiz() {
                    // Simulate API call to ChatGPT
                    this.questions = await this.generateQuestions();
                    this.currentQuestionIndex = 0;
                    this.score = 0;
                    this.currentScreen = 'question';
                    this.startTimer();
                },

                async generateQuestions() {
                    // Simulate questions (replace with actual API call)
                    return [
                        {
                            question: "What is the capital of France?",
                            options: ["London", "Berlin", "Paris", "Madrid"],
                            correctIndex: 2
                        },
                        // Add more questions...
                    ];
                },

                startTimer() {
                    this.timer = 30;
                    this.timerInterval = setInterval(() => {
                        if(this.timer > 0) {
                            this.timer--;
                            this.totalTime++;
                        } else {
                            this.selectAnswer(-1);
                        }
                    }, 1000);
                },

                selectAnswer(index) {
                    clearInterval(this.timerInterval);
                    this.selectedAnswer = index;
                    this.showAnswer = true;
                    if(index === this.currentQuestion.correctIndex) {
                        this.score++;
                    }
                },

                nextQuestion() {
                    if(this.currentQuestionIndex < this.questions.length - 1) {
                        this.currentQuestionIndex++;
                        this.selectedAnswer = null;
                        this.showAnswer = false;
                        this.startTimer();
                    } else {
                        this.currentScreen = 'results';
                    }
                },

                get currentQuestion() {
                    return this.questions[this.currentQuestionIndex] || {};
                },

                exitQuiz() {
                    clearInterval(this.timerInterval);
                    this.currentScreen = 'home';
                },

                async hostQuiz() {
                    // Generate unique code and QR
                    const quizCode = Math.random().toString(36).substr(2, 6).toUpperCase();
                    // Show host screen with code
                    alert(`Quiz Code: ${quizCode}\nShare this code with participants!`);
                },

                joinQuiz() {
                    // Validate and join quiz
                    if(this.quizCode.length === 6) {
                        this.showJoinQuizModal = false;
                        this.startQuiz();
                    }
                },

                logout() {
                    this.currentScreen = 'landing';
                    this.otpSent = false;
                    this.phone = '';
                    this.otp = '';
                }
            }));
        });
    </script>
<script>document.body.addEventListener('wheel', e => { if (!e.ctrlKey) return; e.preventDefault(); return }, { passive: false })</script>
	</body>
</html>